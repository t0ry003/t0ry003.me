<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>t0ry003’s playlists</title>
<link rel="preconnect" href="https://open.spotify.com">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#000000; --fg:#e7e7e7; --brand:#1db954; --card:#121212; --ring:#2a2a2a;
    --radius:18px; --gap:18px; --shadow:0 20px 60px rgba(0,0,0,.45);
    --footer-h:64px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;
       background:linear-gradient(180deg, #0a0a0a 0%, #111 40%, #0a0a0a 100%);
       background-attachment:fixed;
       color:var(--fg);
       font-family:'Outfit', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
       font-size:14px; line-height:1.45;
       padding-bottom:var(--footer-h);
  }
  .wrap{min-height:100%; display:flex; flex-direction:column}
  header{position:sticky; top:0; backdrop-filter:saturate(130%) blur(8px);
         background:linear-gradient(180deg, rgba(10,10,10,.85), rgba(10,10,10,.55) 60%, transparent);
         border-bottom:1px solid var(--ring); z-index:10}
  .bar{max-width:1150px; margin:0 auto; padding:14px 18px; display:flex; gap:14px; align-items:center}
  .logo{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.4px; font-size:16px}
  .logo .spot{display:inline-grid; place-items:center; animation:pulse 2.2s ease-in-out infinite}
  .logo .spin{filter:drop-shadow(0 0 10px rgba(29,185,84,.8))}
  @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}

  main{max-width:1150px; margin:18px auto; padding:0 18px 40px}
  .grid{display:grid; grid-template-columns:repeat(4, 1fr); gap:var(--gap)}
  @media (max-width:1100px){ .grid{grid-template-columns:repeat(3, 1fr)} }
  @media (max-width:820px){ .grid{grid-template-columns:repeat(2, 1fr)} }
  @media (max-width:520px){ .grid{grid-template-columns:1fr} }

  .card{position:relative; background:linear-gradient(180deg,#111,#0d0d0d); border:1px solid var(--ring);
        border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow); transition:transform .18s ease, box-shadow .2s ease, border-color .2s ease}
  .card:hover{transform:translateY(-2px); border-color:#2f2f2f; box-shadow:0 24px 70px rgba(0,0,0,.55)}
  .thumb{position:relative; aspect-ratio:1.4/1; overflow:hidden; background:#0f0f0f}
  .thumb img{width:100%; height:100%; object-fit:cover; display:block; filter:saturate(1.05)}
  .thumb::after{content:""; position:absolute; inset:0; background:linear-gradient(180deg, transparent 55%, rgba(0,0,0,.55))}
  .meta{display:flex; flex-direction:column; gap:10px; padding:12px 14px 14px}
  .title{font-weight:800; font-size:15px}
  .actions{
    display:flex;
    gap:8px;
    margin-top:2px;
    justify-content:center;
    align-items:center;
    position:relative;
    width:100%;
    overflow:visible !important;
  }
  /* Toast notification */
  .toast {
    position: fixed;
    left: 50%;
    bottom: calc(var(--footer-h,64px) + 24px);
    transform: translateX(-50%) scale(1);
    background: #181818;
    color: #e7e7e7;
    border-radius: 10px;
    padding: 14px 32px;
    font-size: 16px;
    font-weight: 700;
    box-shadow: 0 8px 32px rgba(0,0,0,0.35);
    opacity: 0;
    pointer-events: none;
    z-index: 9999;
    transition: opacity 0.25s cubic-bezier(.4,1.2,.6,1), transform 0.25s cubic-bezier(.4,1.2,.6,1);
    will-change: opacity, transform;
    min-width: 120px;
    max-width: 90vw;
    text-align: center;
    word-break: break-word;
  }
  .toast.show {
    opacity: 1;
    pointer-events: auto;
    transform: translateX(-50%) scale(1.04);
  }
  @media (max-width: 600px) {
    .toast {
      font-size: 14px;
      padding: 10px 16px;
      border-radius: 8px;
      min-width: 80px;
      max-width: 96vw;
    }
  }
  @media (prefers-reduced-motion: reduce) {
    .toast, .toast.show {
      transition: none !important;
    }
  }
  .btn{
    cursor:pointer;
    border:1px solid var(--ring);
    background:#0f0f0f;
    color:var(--fg);
    border-radius:10px;
    padding:0;
    font-weight:700;
    text-decoration:none;
    display:inline-grid;
    place-items:center;
    min-width:40px;
    min-height:40px;
  }
.btn:hover{text-decoration:none}
  .btn-brand{background:var(--brand); color:#0b0b0b; border:none}

  .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.5);
         backdrop-filter:blur(4px); z-index:100}
  .modal.open{display:flex}
  .player{position:relative; width:min(920px,92vw); border-radius:20px; background:#0f0f0f; border:1px solid var(--ring); box-shadow:var(--shadow); overflow:hidden}
  .frame{position:relative; height:560px}
  iframe{width:100%; height:100%; border:0; border-radius:16px}
  .close{position:absolute; top:8px; right:8px; background:rgba(17,17,17,.85); border:1px solid var(--ring); color:var(--fg); border-radius:10px; width:40px; height:40px; display:grid; place-items:center; cursor:pointer; z-index:5}

  .loader{position:fixed; inset:0; display:grid; place-items:center; background:rgba(10,10,10,.9); z-index:200; transition:opacity .25s ease}
  .loader.hidden{opacity:0; pointer-events:none}
  .spinner{width:56px; height:56px; border-radius:50%; border:3px solid rgba(255,255,255,.14); border-top-color:var(--brand); animation:spin 1s linear infinite}
  .loadText{margin-top:12px; color:#cfcfcf; font-size:12px; text-align:center}
  @keyframes spin{to{transform:rotate(360deg)}}

  footer{position:fixed; left:0; right:0; bottom:0; height:var(--footer-h);
          display:flex; align-items:center; justify-content:center; gap:14px;
          backdrop-filter:saturate(130%) blur(8px);
          background:linear-gradient(180deg, rgba(10,10,10,.6), rgba(10,10,10,.85));
          border-top:1px solid var(--ring); color:#cfcfcf; font-size:12px; z-index:50}
  .foot-inner{width:100%; max-width:1150px; padding:0 18px; display:flex; align-items:center; gap:12px}
  .foot-right{margin-left:auto; display:flex; align-items:center; gap:8px}
  .fbtn{cursor:pointer; border:1px solid var(--ring); background:#0f0f0f; color:var(--fg);
        border-radius:10px; padding:6px 10px; font-weight:700}
  .fbtn-brand{background:var(--brand); color:#0b0b0b; border:none}
  footer img{border-radius:50%; border:1px solid var(--ring)}
  footer img{border-radius:50%; border:1px solid var(--ring)}
  /* Full-bleed responsive background layer */
  .bg{position:fixed; inset:0; z-index:-1; pointer-events:none;
      background:
        radial-gradient(1200px 800px at 15% -10%, rgba(29,185,84,.10), transparent 60%),
        radial-gradient(900px 700px at 110% 20%, rgba(0,255,170,.08), transparent 65%),
        linear-gradient(180deg, #0a0a0a 0%, #0b0b0b 100%);
  }
  /* Mobile: smoother, centered gradient so it never looks cut */
  @media (max-width: 520px){
    .bg{background:
      radial-gradient(70% 45% at 50% -10%, rgba(29,185,84,.18), transparent 65%),
      radial-gradient(60% 40% at 70% 110%, rgba(0,255,170,.10), transparent 60%),
      linear-gradient(180deg, #0a0a0a 0%, #0b0b0b 100%);}  
  }

  /* Round the top of the fixed footer */
  footer{border-top-left-radius:16px; border-top-right-radius:16px; overflow:hidden; box-shadow:0 -8px 24px rgba(0,0,0,.35)}
  /* Overrides: single-color background and hide old bg layer */
  body{background:var(--bg) !important}
  .bg{display:none}

  /* Icon buttons */
  .actions{display:flex; gap:8px; margin-top:2px}
  .iconbtn{
    display:inline-grid;
    place-items:center;
    width:40px;
    height:40px;
    padding:0;
    border-radius:12px;
    background:none;
    box-shadow:none;
  }
  .iconbtn svg{width:20px; height:20px}
  .btn{cursor:pointer; border:1px solid var(--ring); background:#0f0f0f; color:var(--fg); border-radius:10px; padding:8px 12px; font-weight:700; text-decoration:none}
  .btn-brand{background:var(--brand); color:#0b0b0b; border:none}

.ficonbtn{width:40px; height:40px; display:grid; place-items:center; padding:0}
.ficonbtn svg{width:20px; height:20px}
  /* AMOLED full black overrides */
  html, body{ background:#000 !important }
  header{ background:#000 !important; border-bottom:1px solid var(--ring); backdrop-filter:none !important }
  footer{ background:#000 !important }
  .player{ overflow:visible !important }
  .close{ top:-12px !important; right:-12px !important }
</style>
<link rel="icon" href="https://open.spotify.com/favicon.ico">
<meta property="og:title" content="t0ry003’s playlists">
<meta property="og:description" content="A collection of my public Spotify playlists for cultural enrichment.">
<meta property="og:type" content="website">
<meta property="og:image" content="https://open.spotify.com/favicon.ico">
<meta property="og:url" content="https://open.spotify.com/user/ekb74gpe2rlu2tiae551yp48v">
<meta name="twitter:card" content="summary">
<meta name="theme-color" content="#1db954">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="wrap">
    <header>
      <div class="bar">
        <div class="logo">
          <span class="spot">
            <svg class="spin" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="12" cy="12" r="10" fill="#1db954"/>
              <path d="M7.5 9.75c3.9-1.3 7.1-.85 9.9.35M8.6 13.1c2.85-.85 5.25-.6 7.5.25M10 16.1c1.95-.45 3.7-.35 5.3.2" stroke="#0b0b0b" stroke-width="1.7" stroke-linecap="round"/>
            </svg>
          </span>
          <span>t0ry003’s playlists</span>
        </div>
      </div>
    </header>

    <main>
      <div id="grid" class="grid" aria-live="polite"></div>
    </main>

    <div id="modal" class="modal" aria-hidden="true" role="dialog" aria-label="Spotify Player">
      <div class="player">
        
        <div class="frame" id="frameWrap"></div>
        <button class="close" id="closeModal" aria-label="Close" title="Close">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div id="loader" class="loader" aria-live="assertive" aria-busy="true">
    <div style="display:flex; flex-direction:column; align-items:center">
      <div class="spinner" role="progressbar" aria-label="Loading"></div>
      <div class="loadText">Loading playlists…</div>
    </div>
  </div>

  <footer>
  <div class="foot-inner" style="justify-content:center">
    <a href="https://open.spotify.com/user/ekb74gpe2rlu2tiae551yp48v?si=dcf05d340da946f0" target="_blank" rel="noopener" style="display:flex; align-items:center; gap:10px; text-decoration:none; cursor:pointer">
      <img src="https://i.scdn.co/image/ab6775700000ee85304957ac2146ad1354397db1" alt="t0ry003 profile" width="36" height="36" referrerpolicy="no-referrer" crossorigin="anonymous"/>
      <span style="color:#cfcfcf">Created by <strong style="color:#eaeaea">t0ry003</strong></span>
    </a>
    <div class="foot-right">
      <button class="fbtn fbtn-brand ficonbtn" id="shuffleBtn" title="Shuffle" aria-label="Shuffle"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6h3l12 12M4 18h5M14 6h6" stroke="#0b0b0b" stroke-width="2" stroke-linecap="round"/><path d="M18 15l2 3-3 2" stroke="#0b0b0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
      <button class="fbtn ficonbtn" id="toTopBtn" title="Back to top" aria-label="Back to top"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5l-6 6M12 5l6 6M12 5v14" stroke="#e7e7e7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
    </div>
  </div>
</footer>

<script>
const playlistUrls = [
  'https://open.spotify.com/playlist/6lu36RT1G0Z4JrjSpARjjV',
  'https://open.spotify.com/playlist/6aSQzP0lD9kyQZLvKARkdj',
  'https://open.spotify.com/playlist/13DI1DYVCvrQNETUEuM6gE',
  'https://open.spotify.com/playlist/6ZkNG1wTWWqC49KAQcx4El',
  'https://open.spotify.com/playlist/3b19Jckdecf3PZKBRvb99s'
];

const grid = document.getElementById('grid');
const modal = document.getElementById('modal');
const frameWrap = document.getElementById('frameWrap');
const closeModal = document.getElementById('closeModal');
const loader = document.getElementById('loader');

const oEmbedEndpoint = (url) => `https://open.spotify.com/oembed?url=${encodeURIComponent(url)}`;

function makeIframe(src){
  const iframe = document.createElement('iframe');
  iframe.src = src.includes('/embed/') ? src : src.replace('/playlist/','/embed/playlist/');
  iframe.loading = 'lazy';
  iframe.allow = 'autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture';
  return iframe;
}

function openPlayer(url){
  modal.classList.add('open');
  modal.setAttribute('aria-hidden','false');
  frameWrap.innerHTML = '';
  const iframe = makeIframe(url);
  frameWrap.appendChild(iframe);
}

function closePlayer(){
  modal.classList.remove('open');
  modal.setAttribute('aria-hidden','true');
  frameWrap.innerHTML = '';
}

closeModal.addEventListener('click', closePlayer);
modal.addEventListener('click', (e)=>{ if(e.target === modal) closePlayer(); });
window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closePlayer(); });

async function getMeta(url){
  try{
    const res = await fetch(oEmbedEndpoint(url));
    if(!res.ok) throw new Error('oEmbed failed');
    return await res.json();
  }catch(e){
    return { title: 'Spotify Playlist', thumbnail_url: 'https://open.spotify.com/favicon.ico' };
  }
}

async function buildCard(url){
  const meta = await getMeta(url);
  const card = document.createElement('div');
  card.className = 'card';

  const t = document.createElement('div'); t.className = 'thumb';
  const img = new Image(); img.src = meta.thumbnail_url || 'https://open.spotify.com/favicon.ico'; img.alt = meta.title || 'Playlist';
  t.appendChild(img);
  card.appendChild(t);

  const m = document.createElement('div'); m.className = 'meta';
  const title = document.createElement('div'); title.className = 'title'; title.textContent = meta.title || 'Playlist';

  const actions = document.createElement('div'); actions.className = 'actions';

  // Play button (icon)
  const play = document.createElement('button'); play.className = 'btn btn-brand iconbtn'; play.title = 'Open Player'; play.setAttribute('aria-label','Open Player');
  play.innerHTML = '<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7-11-7z" fill="#0b0b0b"/></svg>';
  play.addEventListener('click', ()=> openPlayer(url));

  // Open in Spotify (icon)
  const open = document.createElement('a'); open.className = 'btn iconbtn'; open.href = url; open.target = '_blank'; open.rel = 'noopener'; open.title = 'Open in Spotify'; open.setAttribute('aria-label','Open in Spotify');
  open.innerHTML = '<svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="7" width="14" height="14" rx="2" stroke="currentColor" fill="none"/><path d="M10 4h10v10" stroke="currentColor" fill="none"/><path d="M20 4L12 12" stroke="currentColor"/></svg>';


  // Copy link (icon) with toast
  const copy = document.createElement('button');
  copy.className = 'btn iconbtn';
  copy.title = 'Copy link';
  copy.setAttribute('aria-label','Copy link');
  copy.innerHTML = '<svg viewBox="0 0 24 24" aria-hidden="true"><rect x="9" y="3" width="12" height="12" rx="2" stroke="currentColor" fill="none"/><rect x="3" y="9" width="12" height="12" rx="2" stroke="currentColor" fill="none"/></svg>';


  // Only append the copy button to actions
  actions.append(play, open, copy);

  copy.addEventListener('click', async (e) => {
    let toast = document.querySelector('.toast');
    if (!toast) {
      toast = document.createElement('div');
      toast.className = 'toast';
      document.body.appendChild(toast);
    }
    // Add clipboard icon SVG before text
    const icon = `<svg style="vertical-align:middle;margin-right:8px;z-index:1;position:relative;" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1db954" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="3" width="8" height="4" rx="1.5"/><rect x="5" y="7" width="14" height="14" rx="2"/></svg>`;
    toast.innerHTML = icon + '<span style="vertical-align:middle;z-index:1;position:relative;">Link copied!</span>';
    toast.setAttribute('aria-live', 'polite');
    toast.setAttribute('role', 'status');
    try {
      await navigator.clipboard.writeText(url);
      copy.title = 'Copied';
    } catch {
      toast.innerHTML = icon + '<span style="vertical-align:middle;z-index:1;position:relative;">Copy failed</span>';
    }
    toast.classList.add('show');
    setTimeout(() => {
      toast.classList.remove('show');
      copy.title = 'Copy link';
    }, 1600);
  });

  m.append(title, actions);
  card.appendChild(m);

  // Click anywhere on card to open player, except on buttons/links
  card.addEventListener('click', (e)=>{
    const tag = e.target.tagName;
    if(tag !== 'BUTTON' && tag !== 'A' && !(e.target.closest && e.target.closest('.btn'))) openPlayer(url);
  });

  return card;
}

async function render(){
  grid.innerHTML = '';
  loader.classList.remove('hidden');

  const cards = await Promise.all(playlistUrls.map(buildCard));
  for(const c of cards) grid.appendChild(c);

  setTimeout(()=> loader.classList.add('hidden'), 120);
}

// Footer actions
const shuffleBtn = document.getElementById('shuffleBtn');
const toTopBtn = document.getElementById('toTopBtn');
if (shuffleBtn) {
  shuffleBtn.addEventListener('click', ()=>{
    const i = Math.floor(Math.random()*playlistUrls.length);
    openPlayer(playlistUrls[i]);
  });
}
if (toTopBtn) {
  toTopBtn.addEventListener('click', ()=>{ window.scrollTo({top:0, behavior:'smooth'}); });
}

render();
</script>
</body>
</html>
